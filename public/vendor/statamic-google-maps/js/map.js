!function(t){var e={};function n(a){if(e[a])return e[a].exports;var o=e[a]={i:a,l:!1,exports:{}};return t[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(a,o,function(e){return t[e]}.bind(null,o));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";n.r(e);var a=function(t,e,n,a,o,s,i,r){var l,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),a&&(c.functional=!0),s&&(c._scopeId="data-v-"+s),i?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(i)},c._ssrRegister=l):o&&(l=r?function(){o.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:o),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(t,e){return l.call(e),u(t,e)}}else{var p=c.beforeCreate;c.beforeCreate=p?[].concat(p,l):[l]}return{exports:t,options:c}}({mixins:[Fieldtype],data:function(){return{lat:null,lng:null,markerLat:null,markerLng:null,zoom:null,type:null,style:null,map:null,marker:null,hasMarker:!1,stylesExpanded:!1,geocoder:null,location:null}},watch:{lat:function(){this.saveLocation()},lng:function(){this.saveLocation()},markerLat:function(){this.saveLocation()},markerLng:function(){this.saveLocation()},zoom:function(){this.saveLocation()},type:function(){this.saveLocation()},style:function(){this.saveLocation()}},computed:{hasGeocoder:function(){return this.config.geocoder},canReset:function(){return this.meta.defaultLat&&this.meta.defaultLng},mapHasChanged:function(){return this.lat!=this.meta.defaultLat||this.lng!=this.meta.defaultLng||this.zoom!=this.config.initial_zoom||this.type!=this.config.initial_type},hasGeolocation:function(){return navigator.geolocation||!1}},mounted:function(){var t=this;this.lat=this.value.lat||this.meta.defaultLat,this.lng=this.value.lng||this.meta.defaultLng,this.markerLat=this.value.markerLat,this.markerLng=this.value.markerLng,this.zoom=this.value.zoom||this.config.initial_zoom||16,this.type=this.value.type||this.config.initial_type||"roadmap",this.style=this.value.style,this.map=new google.maps.Map(this.$refs.map,{zoom:Number(this.zoom),center:{lat:Number.parseFloat(this.lat),lng:Number.parseFloat(this.lng)},mapTypeId:this.type,mapTypeControl:this.config.maptypes,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,google.maps.MapTypeId.SATELLITE,google.maps.MapTypeId.TERRAIN,google.maps.MapTypeId.HYBRID]},streetViewControl:!1}),this.config.markers&&(this.marker=new google.maps.Marker({clickable:!1,draggable:!0}),this.marker.addListener("dragend",(function(){t.markerLat=t.marker.getPosition().lat(),t.markerLng=t.marker.getPosition().lng()})),this.markerLat&&this.markerLng&&this.addMarker({lat:Number.parseFloat(this.markerLat),lng:Number.parseFloat(this.markerLng)})),this.config.geocoder&&(this.geocoder=new google.maps.Geocoder),this.addMapListeners(),this.addUserPositionButton()},methods:{addMapListeners:function(){var t=this;this.config.markers&&this.map.addListener("click",(function(e){t.addMarker(e.latLng),t.markerLat=e.latLng.lat(),t.markerLng=e.latLng.lng()})),this.map.addListener("center_changed",(function(){t.lat=t.map.getCenter().lat(),t.lng=t.map.getCenter().lng()})),this.map.addListener("zoom_changed",(function(){t.zoom=t.map.getZoom()})),this.map.addListener("maptypeid_changed",(function(){t.type=t.map.getMapTypeId()}))},addMarker:function(t){this.marker.setMap(this.map),this.marker.setPosition(t),this.hasMarker=!0},removeMarker:function(){this.marker.setPosition(null),this.marker.setMap(null),this.hasMarker=!1},resetMap:function(){this.map.setCenter({lat:Number.parseFloat(this.meta.defaultLat),lng:Number.parseFloat(this.meta.defaultLng)}),this.map.setZoom(Number(this.meta.defaultZoom)||16),this.map.setMapTypeId(Number(this.meta.defaultType)||"roadmap"),this.removeMarker()},saveLocation:function(){this.update({lat:this.lat,lng:this.lng,markerLat:this.markerLat,markerLng:this.markerLng,zoom:this.zoom,type:this.type,style:this.style})},findPosition:function(){var t=this;this.geocoder.geocode({address:this.location}).then((function(e){if(e.results.length>0){t.$toast.success("Location found");var n=e.results[0].geometry.location;t.map.setCenter(n),t.addMarker(n)}else t.$toast.error("Location not found")})).catch((function(e){t.$toast.error(e.message)}))},findUserPosition:function(){var t=this;navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){var n={lat:e.coords.latitude,lng:e.coords.longitude};t.map.setCenter(n)}),(function(){console.debug("Error getting user position")}))},addUserPositionButton:function(){var t=this,e=document.createElement("button");e.innerHTML='\n<?xml version="1.0" encoding="iso-8859-1"?>\n<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512; display: block;" xml:space="preserve">\n<g><g><path d="M256,0c-48.551,0-95.818,13.675-136.693,39.545l16.044,25.35C171.419,42.066,213.139,30,256,30 c42.861,0,84.581,12.066,120.648,34.895l16.044-25.35C351.818,13.675,304.551,0,256,0z"/></g></g>\n<g><g><path d="M376.649,447.105C340.581,469.934,298.861,482,256,482c-42.861,0-84.581-12.066-120.648-34.895l-16.044,25.35 C160.182,498.325,207.449,512,256,512c48.551,0,95.818-13.675,136.693-39.545L376.649,447.105z"/></g></g>\n<g><g><path d="M472.455,119.307l-25.35,16.044C469.934,171.419,482,213.139,482,256c0,42.861-12.066,84.581-34.895,120.648l25.35,16.044 C498.325,351.818,512,304.551,512,256C512,207.449,498.325,160.182,472.455,119.307z"/></g></g>\n<g><g><path d="M64.895,135.352l-25.35-16.045C13.675,160.182,0,207.449,0,256c0,48.551,13.675,95.818,39.545,136.693l25.35-16.044 C42.066,340.581,30,298.861,30,256C30,213.139,42.066,171.419,64.895,135.352z"/></g></g>\n<g><g><path d="M256,204c-28.673,0-52,23.327-52,52c0,28.673,23.327,52,52,52c28.673,0,52-23.327,52-52C308,227.327,284.673,204,256,204z M256,278c-12.131,0-22-9.869-22-22s9.869-22,22-22c12.131,0,22,9.869,22,22S268.131,278,256,278z"/></g></g>\n</svg>',e.style.margin="10px",e.style.padding="8px",e.style.minWidth="40px",e.style.boxShadow="rgba(0, 0, 0, 0.3) 0px 1px 4px -1px",e.style.backgroundColor="#FFFFFF",e.addEventListener("mouseover",(function(){return e.style.backgroundColor="#EFEFEF"})),e.addEventListener("mouseout",(function(){return e.style.backgroundColor="#FFFFFF"})),e.addEventListener("click",(function(){return t.findUserPosition()})),this.map.controls[google.maps.ControlPosition.RIGHT_TOP].push(e)}}},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.hasGeocoder?n("input",{directives:[{name:"model",rawName:"v-model",value:t.location,expression:"location"}],staticClass:"input-text",attrs:{type:"text",placeholder:"Search location"},domProps:{value:t.location},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.findPosition.apply(null,arguments)},input:function(e){e.target.composing||(t.location=e.target.value)}}}):t._e(),t._v(" "),n("div",{ref:"map",staticClass:"w-full h-96"}),t._v(" "),n("div",{staticClass:"flex justify-between"},[n("div",[t.hasMarker?n("a",{staticClass:"text-red text-xs",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.removeMarker.apply(null,arguments)}}},[t._v("[x] Remove marker")]):t._e()]),t._v(" "),n("div",[t.canReset&&t.mapHasChanged?n("a",{staticClass:"text-red text-xs",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.resetMap.apply(null,arguments)}}},[t._v("[-] Reset map")]):t._e()])]),t._v(" "),this.meta.pro?n("div",{staticClass:"my-2"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.stylesExpanded,expression:"stylesExpanded"}]},[t._m(0),t._v(" "),n("textarea-input",{model:{value:t.style,callback:function(e){t.style=e},expression:"style"}}),t._v(" "),t._m(1),t._v(" "),n("button",{staticClass:"btn mt-2",on:{click:function(e){e.preventDefault(),t.stylesExpanded=!1}}},[t._v("Hide styles")])],1),t._v(" "),n("button",{directives:[{name:"show",rawName:"v-show",value:!t.stylesExpanded,expression:"!stylesExpanded"}],staticClass:"btn",on:{click:function(e){e.preventDefault(),t.stylesExpanded=!0}}},[t._v("Show styles")])]):t._e()])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"help-block"},[e("p",[this._v("Paste in the styles as JSON.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"text-grey text-xs"},[this._v("Need help? Check out the "),e("a",{attrs:{href:"https://mapstyle.withgoogle.com/",target:"_blank"}},[this._v("style tool")]),this._v(" or "),e("a",{attrs:{href:"https://snazzymaps.com/",target:"_blank"}},[this._v("Snazzy Maps")]),this._v(".")])}],!1,null,null,null).exports;Statamic.booting((function(){Statamic.$components.register("google_map-fieldtype",a)}))}]);